import type { core } from "web3";

import type { TolarExecutionAPI } from "../../src/rpc";
import { sendSignedTransaction } from "../../src/rpc";

describe("Method sendSignedTransaction Tests", () => {
  const requestManagerSend = jest.fn();
  const requestManager = {
    send: requestManagerSend,
  } as unknown as core.Web3RequestManager<TolarExecutionAPI>;

  beforeEach(() => {
    requestManagerSend.mockClear();
  });

  it("sendSignedTransaction return", async () => {
    requestManagerSend.mockResolvedValue(
      "f5b6f598c0a968162dfdf8ec33c93171408bac411d833840b9df0bbefbf3ae7f",
    );

    const txHash = await sendSignedTransaction(
      requestManager,
      "0x0a7f0a323534313235316236613766396337626439613739353266336466323532623164633462373063353464386233306430616430123235346634366436313839373335616466343266363730383864336633626238336137333639633934363265663966346230331a012a22030186a02a01013201013a010040eaadc0e52412ca020a4033376232363961376632663831326261326134373961346437393162306465643162313437383031316661333063623535313364666536306637643334306436128201383235383661653739306334656435366534356635343736316365346434636463633237623462623664333931333733653365396366333766333164326562653230383763303366363265333065623437393064343337643436633134663136343437656262616462613964333764336537323937663332303637303162643430301a80013438633138376530643362613531343531626432323465383561633134326137656638626662386161356663343334303761363164353535336562363263363838353131316537653162396234326365663166373438383532303330613734363230623565616233343432373664336230373863626335356264386238306263",
    );

    expect(txHash).toEqual(
      "0xf5b6f598c0a968162dfdf8ec33c93171408bac411d833840b9df0bbefbf3ae7f",
    );
  });
});
